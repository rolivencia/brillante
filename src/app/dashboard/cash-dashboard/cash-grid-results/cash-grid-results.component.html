<div class="card">
    <div class="card-header">
        <div class="row">
            <div class="col-12 d-flex">
                <button class="btn btn-sm btn-outline-secondary mr-3" (click)="generateReport()">ðŸ“Š Generar Reporte</button>
                <button class="btn btn-sm btn-outline-secondary mr-3" (click)="setTodayDate()">ðŸ“… Ver caja de Hoy</button>

                <div class="input-group input-group-sm">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Fecha</span>
                    </div>
                    <input
                        class="form-control"
                        placeholder="yyyy-mm-dd"
                        name="from"
                        [maxDate]="cashDashboardService.ngbMaxDate"
                        [displayMonths]="displayMonths"
                        [navigation]="navigation"
                        [outsideDays]="outsideDays"
                        [(ngModel)]="cashDashboardService.ngbDate"
                        (ngModelChange)="refreshGrid(cashDashboardService.ngbDate)"
                        (click)="from.toggle()"
                        ngbDatepicker
                        #from="ngbDatepicker"
                    />
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" (click)="from.toggle()" type="button">
                            ðŸ“…
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="cash-transaction-grid" class="card-body">
        <div *ngIf="editMode && cashDashboardService.gridCollection.itemCount > 0" class="alert alert-info">
            PresionÃ¡ en "Volver" arriba en el menÃº derecho para desactivar el <b>modo ediciÃ³n</b> y poder seleccionar transacciones de la
            grilla.
        </div>
        <div *ngIf="cashDashboardService.gridCollection.itemCount === 0" class="alert alert-info">
            No hay transacciones registradas para esta fecha.
            <ng-container *ngIf="cashDashboardService.isToday()"
                >RecordÃ¡ que tenÃ©s que <b>abrir caja</b> para poder crear nuevas transacciones para el dÃ­a de hoy y
                visualizarlas.</ng-container
            >
        </div>
        <wj-flex-grid
            #cashGrid
            *ngIf="cashDashboardService.gridCollection.itemCount > 0"
            [selectionMode]="editMode ? 'None' : 'Row'"
            [itemsSource]="cashDashboardService.gridCollection"
            [headersVisibility]="'Column'"
            [autoGenerateColumns]="false"
            [allowResizing]="'Columns'"
            [showSelectedHeaders]="'Row'"
            [isReadOnly]="true"
            (selectionChanged)="getRegisterDetails(cashDashboardService.gridCollection.currentItem)"
        >
            <wj-flex-grid-column
                *ngFor="let column of columns"
                [width]="column.width"
                [binding]="column.binding"
                [header]="column.header"
                [visible]="true"
            >
                <ng-template *ngIf="column.header === 'Ingreso'" wjFlexGridCellTemplate [cellType]="'Cell'" let-cell="cell">
                    {{ cell.item.concept.transactionType.id === 1 ? '$ ' + cell.item.amount : '' }}
                </ng-template>
                <ng-template *ngIf="column.header === 'Egreso'" wjFlexGridCellTemplate [cellType]="'Cell'" let-cell="cell">
                    {{ cell.item.concept.transactionType.id === 0 ? '$ ' + cell.item.amount : '' }}
                </ng-template>
                <ng-template *ngIf="column.header === 'Hora'" wjFlexGridCellTemplate [cellType]="'Cell'" let-cell="cell">
                    {{ cell.item.date.format('HH:mm') }}
                </ng-template>
            </wj-flex-grid-column>
        </wj-flex-grid>
    </div>
</div>
