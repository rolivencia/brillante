<div class="card">
    <div class="card-header">
        <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-sm btn-outline-success" (click)="add()">
                ‚ûï Agregar
            </button>
            <button
                type="button"
                class="btn btn-sm btn-outline-primary"
                *ngIf="repairDashboardService.selectedRepair"
                (click)="update(repairDashboardService.selectedRepair)"
            >
                üõ†Ô∏è Actualizar
            </button>
            <button
                type="button"
                class="btn btn-sm btn-outline-danger"
                *ngIf="repairDashboardService.selectedRepair"
                (click)="open(deleteModal)"
            >
                ‚ùå Eliminar
            </button>
        </div>
    </div>
    <div class="card-body">
        <ng-container *ngIf="repairDashboardService.selectedRepair">
            <p class="mb-0">
                <strong>ID Reparaci√≥n: </strong>
                {{ repairDashboardService.selectedRepair.id }}
            </p>
            <hr />
            <p>
                <strong>Cliente: </strong>
                {{ repairDashboardService.selectedRepair.customer['fullName'] }}
            </p>
            <p><strong>eMail: </strong> {{ repairDashboardService.selectedRepair.customer.email }}</p>
            <p><strong>Tel√©fono: </strong> {{ repairDashboardService.selectedRepair.customer.telephone }}</p>
            <hr />
            <p><strong>Modelo: </strong> {{ repairDashboardService.selectedRepair.device.model }}</p>
            <p><strong>Estado: </strong>{{ repairDashboardService.selectedRepair.status.status }}</p>
            <p><strong>IMEI: </strong>{{ repairDashboardService.selectedRepair.device.deviceId }}</p>
            <p>
                <strong>Encendido: </strong>
                <input
                    type="checkbox"
                    class="form-check-input"
                    disabled
                    [ngModel]="repairDashboardService.selectedRepair.device.turnedOn"
                />
            </p>
            <hr />
            <p><strong>Problema: </strong>{{ repairDashboardService.selectedRepair.issue }}</p>
            <hr />
            <p><strong>Fecha de Ingreso: </strong>{{ repairDashboardService.selectedRepair.checkIn.format('YYYY-MM-DD HH:mm') }}</p>
            <p><strong>√öltima Actualizaci√≥n: </strong>{{ repairDashboardService.selectedRepair.lastUpdate.format('YYYY-MM-DD HH:mm') }}</p>
            <p *ngIf="repairDashboardService.selectedRepair.checkOut">
                <strong>Fecha de T√©rmino: </strong>{{ repairDashboardService.selectedRepair.checkOut.format('YYYY-MM-DD HH:mm') }}
            </p>
            <hr />
            <p *ngIf="repairDashboardService.selectedRepair.cost">
                <strong>Costo de Reparaci√≥n: </strong>$ {{ repairDashboardService.selectedRepair.cost }}
            </p>
            <p *ngIf="repairDashboardService.selectedRepair.price">
                <strong>Precio de Reparaci√≥n: </strong>$ {{ repairDashboardService.selectedRepair.price }}
            </p>
        </ng-container>
        <ng-container *ngIf="!repairDashboardService.selectedRepair">
            <p>Para ver los detalles, seleccione una reparaci√≥n de la grilla</p>
            <hr />
        </ng-container>
    </div>
</div>

<ng-template #deleteModal let-modal>
    <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body text-center">
        <p><b>¬øEst√° seguro de que desea borrar la reparaci√≥n?</b></p>
        <p class="mb-0"><strong>ID Reparaci√≥n: </strong> {{ repairDashboardService.selectedRepair.id }}</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-sm btn-outline-secondary" (click)="modal.close('Cancel')">
            ‚¨ÖÔ∏èÔ∏è Cancelar
        </button>
        <button class="ml-3 btn btn-sm btn-outline-danger" (click)="delete(repairDashboardService.selectedRepair.id)">
            ‚ùå Eliminar
        </button>
    </div>
</ng-template>
