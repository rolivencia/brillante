<div class="card">
    <div class="card-header">
        <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-sm btn-outline-success" (click)="add()">‚ûï Agregar</button>
            @if (repairDashboardService.selectedRepair) {
            <button
                type="button"
                class="btn btn-sm btn-outline-primary"
                (click)="update(repairDashboardService.selectedRepair)"
            >
                üõ†Ô∏è Actualizar
            </button>
            } @if (repairDashboardService.selectedRepair) {
            <button type="button" class="btn btn-sm btn-outline-danger" (click)="open(deleteModal)">‚ùå Eliminar</button>
            }
        </div>
    </div>
    <div class="card-body">
        @if (repairDashboardService.selectedRepair) {
        <p class="mb-0">
            <strong>ID Reparaci√≥n: </strong>
            {{ repairDashboardService.selectedRepair.id }}
        </p>
        <hr />
        <p>
            <strong>Cliente: </strong>
            {{ repairDashboardService.selectedRepair.customer['fullName'] }}
        </p>
        <p><strong>eMail: </strong> {{ repairDashboardService.selectedRepair.customer.email }}</p>
        <p><strong>Tel√©fono: </strong> {{ repairDashboardService.selectedRepair.customer.telephone }}</p>
        <hr />
        <p><strong>Modelo: </strong> {{ repairDashboardService.selectedRepair.device.model }}</p>
        <p><strong>Estado: </strong>{{ repairDashboardService.selectedRepair.status.description }}</p>
        <p><strong>IMEI: </strong>{{ repairDashboardService.selectedRepair.device.deviceId }}</p>
        <label>
            @if (repairDashboardService.selectedRepair.device.turnedOn) { El equipo lleg√≥ encendido } @if
            (!repairDashboardService.selectedRepair.device.turnedOn) { El equipo lleg√≥ apagado }
        </label>
        <hr />
        <p><strong>Problema: </strong>{{ repairDashboardService.selectedRepair.issue }}</p>
        <hr />
        <p>
            <strong>Fecha de Ingreso: </strong
            >{{ repairDashboardService.selectedRepair.checkIn | date: 'YYYY-MM-dd HH:mm' }}
        </p>
        <p>
            <strong>√öltima Actualizaci√≥n: </strong
            >{{ repairDashboardService.selectedRepair.lastUpdate | date: 'YYYY-MM-dd HH:mm' }}
        </p>
        @if (repairDashboardService.selectedRepair.checkOut) {
        <p>
            <strong>Fecha de T√©rmino: </strong
            >{{ repairDashboardService.selectedRepair.checkOut | date: 'YYYY-MM-dd HH:mm' }}
        </p>
        }
        <hr />
        @if (repairDashboardService.selectedRepair.cost) {
        <p><strong>Costo de Reparaci√≥n: </strong>$ {{ repairDashboardService.selectedRepair.cost }}</p>
        } @if (repairDashboardService.selectedRepair.price) {
        <p><strong>Precio de Reparaci√≥n: </strong>$ {{ repairDashboardService.selectedRepair.price }}</p>
        } @if (repairDashboardService.selectedRepair.warrantyTerm) {
        <p><strong>Per√≠odo de garant√≠a: </strong>{{ repairDashboardService.selectedRepair.warrantyTerm }} meses</p>
        } @if (repairDashboardService.selectedRepair.audit.createdBy) {
        <p><strong>Usuario creador: </strong>{{ repairDashboardService.selectedRepair.audit.createdBy.userName }}</p>
        } } @if (!repairDashboardService.selectedRepair) {
        <p>Para ver los detalles, seleccione una reparaci√≥n de la grilla</p>
        <hr />
        }
    </div>
</div>

<ng-template #deleteModal let-modal>
    <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body text-center">
        <p><b>¬øEst√° seguro de que desea borrar la reparaci√≥n?</b></p>
        <p class="mb-0"><strong>ID Reparaci√≥n: </strong> {{ repairDashboardService.selectedRepair.id }}</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-sm btn-outline-secondary" (click)="modal.close('Cancel')">‚¨ÖÔ∏èÔ∏è Cancelar</button>
        <button class="ms-3 btn btn-sm btn-outline-danger" (click)="delete(repairDashboardService.selectedRepair.id)">
            ‚ùå Eliminar
        </button>
    </div>
</ng-template>
