<div class="row">
  <div class="col-8">
    <div class="card">
      <div class="card-body">

        <ng-container>

          <div class="row mb-3">
            <div class="col-6 input-group input-group-sm">
              <div class="input-group-prepend">
                <span class="input-group-text">Desde</span>
              </div>
              <input class="form-control" placeholder="yyyy-mm-dd"
                     name="from"
                     [maxDate]="ngbDateTo"
                     [displayMonths]="displayMonths"
                     [navigation]="navigation"
                     [outsideDays]="outsideDays"
                     [(ngModel)]="ngbDateFrom"
                     (ngModelChange)="formatDate(ngbDateFrom, 'from')"
                     ngbDatepicker
                     #from="ngbDatepicker">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary" (click)="from.toggle()" type="button">üìÖ </button>
              </div>
            </div>

            <div class="col-6 input-group input-group-sm">
              <div class="input-group-prepend">
                <span class="input-group-text">Hasta</span>
              </div>
              <input class="form-control" placeholder="yyyy-mm-dd"
                     name="upto"
                     [minDate]="ngbDateFrom"
                     [maxDate]="ngbMaxDate"
                     [displayMonths]="displayMonths"
                     [navigation]="navigation"
                     [outsideDays]="outsideDays"
                     [(ngModel)]="ngbDateTo"
                     (ngModelChange)="formatDate(ngbDateTo, 'to')"
                     ngbDatepicker
                     #upTo="ngbDatepicker">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary" (click)="upTo.toggle()" type="button">üìÖ </button>
              </div>
            </div>
          </div>

          <p></p>

          <div id="grid-container">
            <div class="alert alert-info h-100 text-center" *ngIf="!gridCollection"> <h3> Cargando... </h3> </div>

            <wj-flex-grid  *ngIf="gridCollection"
                           [itemsSource]="gridCollection"
                           [selectionMode]="'Row'"
                           [headersVisibility]="'Column'"
                           [autoGenerateColumns] = "false"
                           [allowResizing]="'Columns'"
                           [showSelectedHeaders]="'Row'"
                           [isReadOnly]="true"
                           (selectionChanged)="getRepairDetails(gridCollection.currentItem)">
              <wj-flex-grid-filter></wj-flex-grid-filter>
              <wj-flex-grid-column *ngFor="let column of columns"
                                   [width]="column.width"
                                   [binding]="column.binding"
                                   [header]="column.header"
                                   [visible]="true">
              </wj-flex-grid-column>
            </wj-flex-grid>
          </div>

          <p></p>

          <div id="footerControls" class="row">
            <div class="col-12 col-md-6">
              <wj-collection-view-pager [cv]="gridCollection">
              </wj-collection-view-pager>
            </div>
            <div class="col-12 col-md-6 text-right">
              <button class="btn btn-sm btn-outline-primary h-100" (click)="getGridData(showFinished)">Actualizar üîÑ</button>

              <div class="btn-group btn-group-toggle h-100">
                <label class="ml-2 btn btn-sm btn-outline-success" ngbButtonLabel>
                  <input type="checkbox" [(ngModel)]="showFinished" ngbButton>
                  <ng-container *ngIf="showFinished">‚úÖ</ng-container>
                  <ng-container *ngIf="!showFinished">‚ùå</ng-container>
                  Ver completados
                </label>
              </div>

            </div>
          </div>

        </ng-container>

      </div>
    </div>
  </div>
  <div class="col-4">
    <div class="card">
      <div class="card-body">
        <ng-container *ngIf="selectedRepairData">
          <div class="row">
            <div class="col-6">
              <p class="mb-0"><strong>ID: </strong> {{ selectedRepairData.repairId }}</p>
            </div>
            <div class="col-6 text-right">
              <button class="btn btn-sm btn-primary" (click)="goToUpdate(selectedRepairData.repairId)">Actualizar</button>
            </div>
          </div>
          <hr>
          <p><strong>Cliente: </strong> {{ selectedRepairData.nombreApellidoCliente }}</p>
          <p><strong>eMail: </strong> {{ selectedRepairData.emailCliente }}</p>
          <p><strong>Tel√©fono: </strong> {{ selectedRepairData.telefonoCliente }}</p>
          <hr>
          <p><strong>Modelo: </strong> {{ selectedRepairData.modelo }}</p>
          <p><strong>Estado: </strong>{{ selectedRepairData.estado }}</p>
          <p><strong>IMEI: </strong>{{ selectedRepairData.imei }}</p>
          <p><strong>Encendido: </strong> <input type="checkbox" class="form-check-input" disabled [ngModel]="selectedRepairData.encendido"></p>
          <hr>
          <p><strong>Problema: </strong>{{ selectedRepairData.problema }}</p>
          <hr>
          <p><strong>Fecha de Ingreso: </strong>{{ selectedRepairData.fechaIngreso }}</p>
          <p><strong>√öltima Actualizaci√≥n: </strong>{{ selectedRepairData.fechaUltimaActualizacion }}</p>
          <p *ngIf="selectedRepairData.fechaReparacionTerminada"><strong>Fecha de T√©rmino: </strong>{{ selectedRepairData.fechaReparacionTerminada }}</p>
          <hr>
          <p><strong>Costo de Reparaci√≥n: </strong>$ {{ selectedRepairData.costoReparacion }}</p>
          <p><strong>Precio de Reparaci√≥n: </strong>$ {{ selectedRepairData.precioReparacion }}</p>
        </ng-container>
        <ng-container *ngIf="!selectedRepairData">
          <p>Seleccione una reparaci√≥n de la grilla</p>
          <hr>
        </ng-container>
      </div>
    </div>
  </div>
</div>
